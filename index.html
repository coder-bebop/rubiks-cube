<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">
	<style>
		body {
			display: flex;
		}
		img {
			margin: 20px;
			width: 90%;
		}
		h5 {
			min-width: 70px;
			margin-left: 20px;
		}
		button {
			margin-top: 20px;
		}
		#menu {
			width: 20%;
			height: 100%;
			display: flex;
			flex-direction: column;
			align-items: center;
			padding: 20px;
		}
		#cube {
			width: 80%;
			height: 100%;
		}
		.option {
			margin-top: 20px;
		}
		.color {
			display: flex;
			flex-direction: row;
			margin: 20px;
		}
		.form-control-color {
			min-width: 50px;
		}
	</style>
	<title>Rubik's Cube</title>
</head>
<body>
	<div id="menu">
		<h1>Rubik's Cube</h1>
		<img src="cubes.jpeg">
		<h3>Options:</h3>
		<div class="option">
			<h4>Cube's dimensions:</h4>
			<select id="dimensions" class="form-select form-select-lg">
				<option value="2" selected onclick="updateCube()">2x2</option>
				<option value="3" onclick="updateCube()">3x3</option>
			</select>
		</div>
		<div class="option">
			<h4>Colors:</h4>
		</div>
		<div class="option">
			<div class="color">
				<h5>Face 0:</h5>
				<input id="face0" type="color" class="form-control form-control-color" value="#ff0000">

				<h5>Face 1:</h5>
				<input id="face1" type="color" class="form-control form-control-color" value="#228B22">
			</div>

			<div class="color">
				<h5>Face 2:</h5>
				<input id="face2" type="color" class="form-control form-control-color" value="#ff7700">

				<h5>Face 3:</h5>
				<input id="face3" type="color" class="form-control form-control-color" value="#0000ff">
			</div>

			<div class="color">
				<h5>Face 4:</h5>
				<input id="face4" type="color" class="form-control form-control-color" value="#cccc00">

				<h5>Face 5:</h5>
				<input id="face5" type="color" class="form-control form-control-color" value="#ffffff">
			</div>
		</div>

		<div>
			<button type="button" class="btn btn-primary btn-lg" onclick="updateCube()">Update</button>
			<button type="button" class="btn btn-primary btn-lg" onclick="next()">Next</button>
		</div>
		<audio>
			<source src="assets/soldado.mp3" type="audio/mp3">
		</audio>
	</div>
	<div id="cube">
	</div>

	<script type="module" src="./cube.js"></script>
	<script src="./matrix.js"></script>
	<script type="module">
		import { sendData, restartScene } from "./cube.js";

		let audio = new Audio("assets/soldado.mp3"); 

		let d, f0, f1, f2, f3, f4, f5;

		function updateParams() {
			d = document.getElementById("dimensions").value;
			f0 = document.getElementById("face0").value;
			f1 = document.getElementById("face1").value;
			f2 = document.getElementById("face2").value;
			f3 = document.getElementById("face3").value;
			f4 = document.getElementById("face4").value;
			f5 = document.getElementById("face5").value;
		}

		function updateCube() {
			updateParams();
			sendData(d, f0, f1, f2, f3, f4, f5);
			restartScene();
		}

		function next() {
			updateParams();

			let href = "play.html?";
			href += "d=" + d + "&";
			href += "f0=" + f0.substring(1, 7) + "&";
			href += "f1=" + f1.substring(1, 7) + "&";
			href += "f2=" + f2.substring(1, 7) + "&";
			href += "f3=" + f3.substring(1, 7) + "&";
			href += "f4=" + f4.substring(1, 7) + "&";
			href += "f5=" + f5.substring(1, 7);

			location.href = href;
		}

		updateParams();
		sendData(d, f0, f1, f2, f3, f4, f5);
		//audio.play();

		window.updateCube = updateCube;
		window.next = next;
	</script>
</body>
</html>